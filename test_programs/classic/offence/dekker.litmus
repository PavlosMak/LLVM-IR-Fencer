X86 Dekker
""

{}

P0               | P1              ;
MOV [flag1], $1  | MOV [flag2], $1 ;
while1:          | while2:         ;
CMP [flag2], $1  | CMP [flag1], $1 ;
JNE exit1        | JNE exit2       ;
CMP [turn], $0   | CMP [turn], $1  ;
JE  while1       | JE while2       ;
MOV [flag1], $0  | MOV [flag2], $0 ;
waitbar1:        | waitbar2:       ;
CMP [turn], $0   | CMP [turn], $1  ;
JNE waitbar1     | JNE waitbar2    ;
MOV [flag1], $1  | MOV [flag2], $1 ;
JMP while1       | JMP while2      ;
exit1:           | exit2:          ;
MOV [x], $0      | MOV [x], $1     ;
MOV EAX, [x]     | MOV EAX, [x]    ;
MOV [turn], $1   | MOV [turn], $1  ;
MOV [flag1], $0  | MOV [flag2], $0 ;

