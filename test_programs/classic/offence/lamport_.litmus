X86 Lamport-F

{}

 P0           | P1           ;
 while1:      | while2:      ;
 MOV [b1],$1  | MOV [b2],$1  ;
 MOV [x],$1   | MOV [x],$2   ;
 CMP  [y],$0  | CMP  [y],$0  ;
 JE notif1    | JE notif3    ;
 MOV [b1],$0  | MOV [b2],$0  ;
 waitbar1:    | waitbar4:    ;
 MOV EBX, [y] | MOV EBX, [y] ;
 JMP while1   | JMP while2   ;
 notif1:      | notif3:      ;
 MOV [y],$1   | MOV [y],$2   ;
 CMP  [x],$1  | CMP  [x],$2  ;
 JE notif2    | JE notif4    ;
 MOV [b1],$0  | MOV [b2],$0  ;
 waitbar2:    | waitbar5:    ;
 MOV ECX, [b2]| MOV ECX,[b1] ;
 CMP  [y],$1  | CMP  [y],$2  ;
 JE notif2    | JE notif4    ;
 waitbar3:    | waitbar6:    ;
 MOV EDX, [y] | MOV EDX, [y] ;
 JMP while1   | JMP while2   ;
 notif2:      | notif4:      ;
 MOV [y],$0   | MOV [y],$0   ;
 MOV [b1],$0  | MOV [b2],$0  ;

exits ( 0:EBX=0 /\ 1:EBX=0 /\ 0:ECX=0 /\ 1:ECX=0 /\ 0:EDX=0 /\ 1:EDX=0 )
